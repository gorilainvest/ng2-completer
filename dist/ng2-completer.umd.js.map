{"version":3,"file":"ng2-completer.umd.js","sources":["globals.js","services/completer-data-factory.js","directives/ctr-completer.js","services/completer-base-data.js","services/local-data.js","services/remote-data.js","services/completer-service.js","components/completer-cmp.js","components/completer-list-item-cmp.js","directives/ctr-dropdown.js","directives/ctr-input.js","directives/ctr-list.js","directives/ctr-row.js","ng2-completer.module.js"],"sourcesContent":["export var MAX_CHARS = 524288; // the default max length per the html maxlength attribute\r\n// the default max length per the html maxlength attribute\r\nexport var MIN_SEARCH_LENGTH = 3;\r\nexport var PAUSE = 100;\r\nexport var TEXT_SEARCHING = \"Searching...\";\r\nexport var TEXT_NO_RESULTS = \"No results found\";\r\nexport var CLEAR_TIMEOUT = 50;\r\nexport function isNil(value) {\r\n    return typeof value === \"undefined\" || value === null;\r\n}\r\n;\r\n//# sourceMappingURL=globals.js.map","import { Http } from \"@angular/http\";\r\nimport { LocalData } from \"./local-data\";\r\nimport { RemoteData } from \"./remote-data\";\r\nexport function localDataFactory() {\r\n    return function () {\r\n        return new LocalData();\r\n    };\r\n}\r\nexport function remoteDataFactory(http) {\r\n    return function () {\r\n        return new RemoteData(http);\r\n    };\r\n}\r\nexport var LocalDataFactoryProvider = { provide: LocalData, useFactory: localDataFactory };\r\nexport var RemoteDataFactoryProvider = { provide: RemoteData, useFactory: remoteDataFactory, deps: [Http] };\r\n//# sourceMappingURL=completer-data-factory.js.map","import { Directive, EventEmitter, Output } from \"@angular/core\";\r\nvar CtrCompleter = (function () {\r\n    function CtrCompleter() {\r\n        this.selected = new EventEmitter();\r\n        this.highlighted = new EventEmitter();\r\n        this.opened = new EventEmitter();\r\n        this._hasHighlighted = false;\r\n        this._hasSelected = false;\r\n        this._cancelBlur = false;\r\n        this._isOpen = false;\r\n    }\r\n    CtrCompleter.prototype.registerList = function (list) {\r\n        this.list = list;\r\n    };\r\n    CtrCompleter.prototype.registerDropdown = function (dropdown) {\r\n        this.dropdown = dropdown;\r\n    };\r\n    CtrCompleter.prototype.onHighlighted = function (item) {\r\n        this.highlighted.emit(item);\r\n        this._hasHighlighted = !!item;\r\n    };\r\n    CtrCompleter.prototype.onSelected = function (item, clearList) {\r\n        if (clearList === void 0) { clearList = true; }\r\n        this.selected.emit(item);\r\n        if (item) {\r\n            this._hasSelected = true;\r\n        }\r\n        if (clearList) {\r\n            this.clear();\r\n        }\r\n    };\r\n    CtrCompleter.prototype.search = function (term) {\r\n        if (this._hasSelected) {\r\n            this.selected.emit(null);\r\n            this._hasSelected = false;\r\n        }\r\n        if (this.list) {\r\n            this.list.search(term);\r\n        }\r\n    };\r\n    CtrCompleter.prototype.clear = function () {\r\n        if (this.dropdown) {\r\n            this.dropdown.clear();\r\n        }\r\n        if (this.list) {\r\n            this.list.clear();\r\n        }\r\n        this._hasHighlighted = false;\r\n        this.isOpen = false;\r\n    };\r\n    CtrCompleter.prototype.selectCurrent = function () {\r\n        if (this.dropdown) {\r\n            this.dropdown.selectCurrent();\r\n        }\r\n    };\r\n    CtrCompleter.prototype.nextRow = function () {\r\n        if (this.dropdown) {\r\n            this.dropdown.nextRow();\r\n        }\r\n    };\r\n    CtrCompleter.prototype.prevRow = function () {\r\n        if (this.dropdown) {\r\n            this.dropdown.prevRow();\r\n        }\r\n    };\r\n    CtrCompleter.prototype.hasHighlighted = function () {\r\n        return this._hasHighlighted;\r\n    };\r\n    CtrCompleter.prototype.cancelBlur = function (cancel) {\r\n        this._cancelBlur = cancel;\r\n    };\r\n    CtrCompleter.prototype.isCancelBlur = function () {\r\n        return this._cancelBlur;\r\n    };\r\n    CtrCompleter.prototype.open = function () {\r\n        if (!this._isOpen) {\r\n            this.isOpen = true;\r\n            this.list.open();\r\n        }\r\n    };\r\n    Object.defineProperty(CtrCompleter.prototype, \"isOpen\", {\r\n        get: function () {\r\n            return this._isOpen;\r\n        },\r\n        set: function (open) {\r\n            this._isOpen = open;\r\n            this.opened.emit(this._isOpen);\r\n            if (this.list) {\r\n                this.list.isOpen(open);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CtrCompleter.prototype, \"autoHighlightIndex\", {\r\n        get: function () {\r\n            return this._autoHighlightIndex;\r\n        },\r\n        set: function (index) {\r\n            this._autoHighlightIndex = index;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CtrCompleter.prototype, \"hasSelected\", {\r\n        get: function () {\r\n            return this._hasSelected;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CtrCompleter;\r\n}());\r\nexport { CtrCompleter };\r\nCtrCompleter.decorators = [\r\n    { type: Directive, args: [{\r\n                selector: \"[ctrCompleter]\",\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCtrCompleter.ctorParameters = function () { return []; };\r\nCtrCompleter.propDecorators = {\r\n    'selected': [{ type: Output },],\r\n    'highlighted': [{ type: Output },],\r\n    'opened': [{ type: Output },],\r\n};\r\n//# sourceMappingURL=ctr-completer.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Subject } from \"rxjs/Subject\";\r\nimport { isNil } from \"../globals\";\r\nvar CompleterBaseData = (function (_super) {\r\n    __extends(CompleterBaseData, _super);\r\n    function CompleterBaseData() {\r\n        return _super.call(this) || this;\r\n    }\r\n    CompleterBaseData.prototype.cancel = function () { };\r\n    CompleterBaseData.prototype.searchFields = function (searchFields) {\r\n        this._searchFields = searchFields;\r\n        return this;\r\n    };\r\n    CompleterBaseData.prototype.titleField = function (titleField) {\r\n        this._titleField = titleField;\r\n        return this;\r\n    };\r\n    CompleterBaseData.prototype.descriptionField = function (descriptionField) {\r\n        this._descriptionField = descriptionField;\r\n        return this;\r\n    };\r\n    CompleterBaseData.prototype.imageField = function (imageField) {\r\n        this._imageField = imageField;\r\n        return this;\r\n    };\r\n    CompleterBaseData.prototype.convertToItem = function (data) {\r\n        var image = null;\r\n        var formattedText;\r\n        var formattedDesc;\r\n        if (this._titleField) {\r\n            formattedText = this.extractTitle(data);\r\n        }\r\n        else {\r\n            formattedText = data;\r\n        }\r\n        if (this._descriptionField) {\r\n            formattedDesc = this.extractValue(data, this._descriptionField);\r\n        }\r\n        if (this._imageField) {\r\n            image = this.extractValue(data, this._imageField);\r\n        }\r\n        if (isNil(formattedText)) {\r\n            return null;\r\n        }\r\n        return {\r\n            title: formattedText,\r\n            description: formattedDesc,\r\n            image: image,\r\n            originalObject: data\r\n        };\r\n    };\r\n    CompleterBaseData.prototype.responseFormatter = function (formatterFunction) {\r\n        this.formatterFunction = formatterFunction;\r\n    };\r\n    CompleterBaseData.prototype.extractMatches = function (data, term) {\r\n        var _this = this;\r\n        var matches = [];\r\n        var searchFields = this._searchFields ? this._searchFields.split(\",\") : null;\r\n        if (this._searchFields !== null && this._searchFields !== undefined && term != \"\") {\r\n            matches = data.filter(function (item) {\r\n                var values = searchFields ? searchFields.map(function (searchField) { return _this.extractValue(item, searchField); }).filter(function (value) { return !!value; }) : [item];\r\n                return values.some(function (value) { return value.toString().toLowerCase().indexOf(term.toString().toLowerCase()) >= 0; });\r\n            });\r\n        }\r\n        else {\r\n            matches = data;\r\n        }\r\n        return matches;\r\n    };\r\n    CompleterBaseData.prototype.extractTitle = function (item) {\r\n        var _this = this;\r\n        // split title fields and run extractValue for each and join with ' '\r\n        return this._titleField.split(\",\")\r\n            .map(function (field) {\r\n            return _this.extractValue(item, field);\r\n        })\r\n            .reduce(function (acc, titlePart) { return acc ? acc + \" \" + titlePart : titlePart; });\r\n    };\r\n    CompleterBaseData.prototype.extractValue = function (obj, key) {\r\n        var keys;\r\n        var result;\r\n        if (key) {\r\n            keys = key.split(\".\");\r\n            result = obj;\r\n            for (var i = 0; i < keys.length; i++) {\r\n                if (result) {\r\n                    result = result[keys[i]];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = obj;\r\n        }\r\n        return result;\r\n    };\r\n    CompleterBaseData.prototype.processResults = function (matches) {\r\n        var i;\r\n        var results = [];\r\n        if (matches && matches.length > 0) {\r\n            for (i = 0; i < matches.length; i++) {\r\n                var item = this.convertToItem(matches[i]);\r\n                if (item) {\r\n                    results.push(item);\r\n                }\r\n            }\r\n        }\r\n        return this.executeFormatterFunction(results);\r\n    };\r\n    CompleterBaseData.prototype.executeFormatterFunction = function (data) {\r\n        try {\r\n            var fn = this.formatterFunction;\r\n            if (typeof fn !== 'undefined' && fn !== null) {\r\n                var temp = fn(data);\r\n                return temp;\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.warn(e);\r\n        }\r\n        return data;\r\n    };\r\n    return CompleterBaseData;\r\n}(Subject));\r\nexport { CompleterBaseData };\r\n//# sourceMappingURL=completer-base-data.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { CompleterBaseData } from \"./completer-base-data\";\r\nvar LocalData = (function (_super) {\r\n    __extends(LocalData, _super);\r\n    function LocalData() {\r\n        return _super.call(this) || this;\r\n    }\r\n    LocalData.prototype.data = function (data) {\r\n        var _this = this;\r\n        if (data instanceof Observable) {\r\n            data.subscribe(function (res) {\r\n                _this._data = res;\r\n                if (_this.savedTerm) {\r\n                    _this.search(_this.savedTerm);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this._data = data;\r\n        }\r\n        return this;\r\n    };\r\n    LocalData.prototype.search = function (term) {\r\n        if (!this._data) {\r\n            this.savedTerm = term;\r\n        }\r\n        else {\r\n            this.savedTerm = null;\r\n            var matches = this.extractMatches(this._data, term);\r\n            this.next(this.processResults(matches));\r\n        }\r\n    };\r\n    LocalData.prototype.convertToItem = function (data) {\r\n        return _super.prototype.convertToItem.call(this, data);\r\n    };\r\n    return LocalData;\r\n}(CompleterBaseData));\r\nexport { LocalData };\r\nLocalData.decorators = [\r\n    { type: Injectable },\r\n];\r\n/** @nocollapse */\r\nLocalData.ctorParameters = function () { return []; };\r\n//# sourceMappingURL=local-data.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Headers, RequestOptions } from \"@angular/http\";\r\nimport \"rxjs/add/operator/map\";\r\nimport \"rxjs/add/operator/catch\";\r\nimport { CompleterBaseData } from \"./completer-base-data\";\r\nvar RemoteData = (function (_super) {\r\n    __extends(RemoteData, _super);\r\n    function RemoteData(http) {\r\n        var _this = _super.call(this) || this;\r\n        _this.http = http;\r\n        _this._urlFormater = null;\r\n        _this._dataField = null;\r\n        return _this;\r\n    }\r\n    RemoteData.prototype.remoteUrl = function (remoteUrl) {\r\n        this._remoteUrl = remoteUrl;\r\n        return this;\r\n    };\r\n    RemoteData.prototype.urlFormater = function (urlFormater) {\r\n        this._urlFormater = urlFormater;\r\n    };\r\n    RemoteData.prototype.dataField = function (dataField) {\r\n        this._dataField = dataField;\r\n    };\r\n    /**\r\n     * @deprecated Please use the requestOptions to pass headers with the search request\r\n     */\r\n    RemoteData.prototype.headers = function (headers) {\r\n        this._headers = headers;\r\n    };\r\n    RemoteData.prototype.requestOptions = function (requestOptions) {\r\n        this._requestOptions = requestOptions;\r\n    };\r\n    RemoteData.prototype.search = function (term) {\r\n        var _this = this;\r\n        this.cancel();\r\n        // let params = {};\r\n        var url = \"\";\r\n        if (this._urlFormater) {\r\n            url = this._urlFormater(term);\r\n        }\r\n        else {\r\n            url = this._remoteUrl + encodeURIComponent(term);\r\n        }\r\n        /*\r\n         * If requestOptions are provided, they will override anything set in headers.\r\n         *\r\n         * If no requestOptions are provided, a new RequestOptions object will be instantiated,\r\n         * and either the provided headers or a new Headers() object will be sent.\r\n         */\r\n        if (!this._requestOptions) {\r\n            this._requestOptions = new RequestOptions();\r\n            this._requestOptions.headers = this._headers || new Headers();\r\n        }\r\n        this.remoteSearch = this.http.get(url, this._requestOptions)\r\n            .map(function (res) { return res.json(); })\r\n            .map(function (data) {\r\n            var matches = _this.extractValue(data, _this._dataField);\r\n            return _this.extractMatches(matches, term);\r\n        })\r\n            .map(function (matches) {\r\n            var results = _this.processResults(matches);\r\n            _this.next(results);\r\n            return results;\r\n        })\r\n            .catch(function (err) {\r\n            _this.error(err);\r\n            return null;\r\n        })\r\n            .subscribe();\r\n    };\r\n    RemoteData.prototype.cancel = function () {\r\n        if (this.remoteSearch) {\r\n            this.remoteSearch.unsubscribe();\r\n        }\r\n    };\r\n    RemoteData.prototype.convertToItem = function (data) {\r\n        return _super.prototype.convertToItem.call(this, data);\r\n    };\r\n    return RemoteData;\r\n}(CompleterBaseData));\r\nexport { RemoteData };\r\n//# sourceMappingURL=remote-data.js.map","import { Injectable, Inject } from \"@angular/core\";\r\nimport { LocalData } from \"./local-data\";\r\nimport { RemoteData } from \"./remote-data\";\r\nvar CompleterService = (function () {\r\n    function CompleterService(localDataFactory, // Using any instead of () => LocalData because on AoT errors\r\n        remoteDataFactory // Using any instead of () => LocalData because on AoT errors\r\n    ) {\r\n        this.localDataFactory = localDataFactory;\r\n        this.remoteDataFactory = remoteDataFactory; // Using any instead of () => LocalData because on AoT errors\r\n    }\r\n    CompleterService.prototype.local = function (data, searchFields, titleField) {\r\n        if (searchFields === void 0) { searchFields = \"\"; }\r\n        if (titleField === void 0) { titleField = \"\"; }\r\n        var localData = this.localDataFactory();\r\n        return localData\r\n            .data(data)\r\n            .searchFields(searchFields)\r\n            .titleField(titleField);\r\n    };\r\n    CompleterService.prototype.remote = function (url, searchFields, titleField) {\r\n        if (searchFields === void 0) { searchFields = \"\"; }\r\n        if (titleField === void 0) { titleField = \"\"; }\r\n        var remoteData = this.remoteDataFactory();\r\n        return remoteData\r\n            .remoteUrl(url)\r\n            .searchFields(searchFields)\r\n            .titleField(titleField);\r\n    };\r\n    return CompleterService;\r\n}());\r\nexport { CompleterService };\r\nCompleterService.decorators = [\r\n    { type: Injectable },\r\n];\r\n/** @nocollapse */\r\nCompleterService.ctorParameters = function () { return [\r\n    { type: undefined, decorators: [{ type: Inject, args: [LocalData,] },] },\r\n    { type: undefined, decorators: [{ type: Inject, args: [RemoteData,] },] },\r\n]; };\r\n//# sourceMappingURL=completer-service.js.map","\"use strict\";\r\nimport { Component, Input, Output, EventEmitter, ViewChild, forwardRef } from \"@angular/core\";\r\nimport { FormControl, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { CtrCompleter } from \"../directives/ctr-completer\";\r\nimport { CompleterService } from \"../services/completer-service\";\r\nimport { MAX_CHARS, MIN_SEARCH_LENGTH, PAUSE, TEXT_SEARCHING, TEXT_NO_RESULTS } from \"../globals\";\r\nimport \"rxjs/add/operator/catch\";\r\nvar noop = function () { };\r\nvar COMPLETER_CONTROL_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(function () { return CompleterCmp; }),\r\n    multi: true\r\n};\r\nvar CompleterCmp = (function () {\r\n    function CompleterCmp(completerService) {\r\n        this.completerService = completerService;\r\n        this.inputName = \"\";\r\n        this.inputId = \"\";\r\n        this.pause = PAUSE;\r\n        this.minSearchLength = MIN_SEARCH_LENGTH;\r\n        this.maxChars = MAX_CHARS;\r\n        this.overrideSuggested = false;\r\n        this.clearSelected = false;\r\n        this.clearUnselected = false;\r\n        this.fillHighlighted = true;\r\n        this.placeholder = \"\";\r\n        this.autoMatch = false;\r\n        this.disableInput = false;\r\n        this.autofocus = false;\r\n        this.openOnFocus = false;\r\n        this.autoHighlight = false;\r\n        this.selected = new EventEmitter();\r\n        this.highlighted = new EventEmitter();\r\n        this.blur = new EventEmitter();\r\n        this.focusEvent = new EventEmitter();\r\n        this.opened = new EventEmitter();\r\n        this.keyup = new EventEmitter();\r\n        this.keydown = new EventEmitter();\r\n        this.searchStr = \"\";\r\n        this.control = new FormControl(\"\");\r\n        this.displaySearching = true;\r\n        this.displayNoResults = true;\r\n        this._onTouchedCallback = noop;\r\n        this._onChangeCallback = noop;\r\n        this._focus = false;\r\n        this._open = false;\r\n        this._textNoResults = TEXT_NO_RESULTS;\r\n        this._textSearching = TEXT_SEARCHING;\r\n    }\r\n    Object.defineProperty(CompleterCmp.prototype, \"value\", {\r\n        get: function () { return this.searchStr; },\r\n        set: function (v) {\r\n            if (v !== this.searchStr) {\r\n                this.searchStr = v;\r\n            }\r\n            // Propagate the change in any case\r\n            this._onChangeCallback(v);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    CompleterCmp.prototype.ngAfterViewInit = function () {\r\n        if (this.autofocus) {\r\n            this._focus = true;\r\n        }\r\n    };\r\n    CompleterCmp.prototype.ngAfterViewChecked = function () {\r\n        if (this._focus) {\r\n            this.ctrInput.nativeElement.focus();\r\n            this._focus = false;\r\n        }\r\n    };\r\n    CompleterCmp.prototype.onTouched = function () {\r\n        this._onTouchedCallback();\r\n    };\r\n    CompleterCmp.prototype.writeValue = function (value) {\r\n        this.searchStr = value;\r\n    };\r\n    CompleterCmp.prototype.registerOnChange = function (fn) {\r\n        this._onChangeCallback = fn;\r\n    };\r\n    CompleterCmp.prototype.registerOnTouched = function (fn) {\r\n        this._onTouchedCallback = fn;\r\n    };\r\n    Object.defineProperty(CompleterCmp.prototype, \"datasource\", {\r\n        set: function (source) {\r\n            if (source) {\r\n                if (source instanceof Array) {\r\n                    this.dataService = this.completerService.local(source);\r\n                }\r\n                else if (typeof (source) === \"string\") {\r\n                    this.dataService = this.completerService.remote(source);\r\n                }\r\n                else {\r\n                    this.dataService = source;\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompleterCmp.prototype, \"textNoResults\", {\r\n        set: function (text) {\r\n            if (this._textNoResults != text) {\r\n                this._textNoResults = text;\r\n                this.displayNoResults = this._textNoResults && this._textNoResults !== \"false\";\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompleterCmp.prototype, \"textSearching\", {\r\n        set: function (text) {\r\n            if (this._textSearching != text) {\r\n                this._textSearching = text;\r\n                this.displaySearching = this._textSearching && this._textSearching !== \"false\";\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompleterCmp.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.completer.selected.subscribe(function (item) {\r\n            _this.selected.emit(item);\r\n        });\r\n        this.completer.highlighted.subscribe(function (item) {\r\n            _this.highlighted.emit(item);\r\n        });\r\n        this.completer.opened.subscribe(function (isOpen) {\r\n            _this._open = isOpen;\r\n            _this.opened.emit(isOpen);\r\n        });\r\n    };\r\n    CompleterCmp.prototype.onBlur = function () {\r\n        this.blur.emit();\r\n        this.onTouched();\r\n    };\r\n    CompleterCmp.prototype.onFocus = function () {\r\n        this.focusEvent.emit();\r\n        this.onTouched();\r\n    };\r\n    CompleterCmp.prototype.onKeyup = function (event) {\r\n        this.keyup.emit(event);\r\n    };\r\n    CompleterCmp.prototype.onKeydown = function (event) {\r\n        this.keydown.emit(event);\r\n    };\r\n    CompleterCmp.prototype.onChange = function (value) {\r\n        this.value = value;\r\n    };\r\n    CompleterCmp.prototype.open = function () {\r\n        this.completer.open();\r\n    };\r\n    CompleterCmp.prototype.close = function () {\r\n        this.completer.clear();\r\n    };\r\n    CompleterCmp.prototype.focus = function () {\r\n        if (this.ctrInput) {\r\n            this.ctrInput.nativeElement.focus();\r\n        }\r\n        else {\r\n            this._focus = true;\r\n        }\r\n    };\r\n    CompleterCmp.prototype.isOpen = function () {\r\n        return this._open;\r\n    };\r\n    return CompleterCmp;\r\n}());\r\nexport { CompleterCmp };\r\nCompleterCmp.decorators = [\r\n    { type: Component, args: [{\r\n                selector: \"ng2-completer\",\r\n                template: \"\\n        <div class=\\\"completer-holder\\\" ctrCompleter>\\n            <input #ctrInput [attr.id]=\\\"inputId.length > 0 ? inputId : null\\\" type=\\\"search\\\" class=\\\"completer-input\\\" ctrInput [ngClass]=\\\"inputClass\\\" \\n                [(ngModel)]=\\\"searchStr\\\" (ngModelChange)=\\\"onChange($event)\\\" [attr.name]=\\\"inputName\\\" [placeholder]=\\\"placeholder\\\"\\n                [attr.maxlength]=\\\"maxChars\\\" [tabindex]=\\\"fieldTabindex\\\" [disabled]=\\\"disableInput\\\" \\n                [clearSelected]=\\\"clearSelected\\\" [clearUnselected]=\\\"clearUnselected\\\"\\n                [overrideSuggested]=\\\"overrideSuggested\\\" [openOnFocus]=\\\"openOnFocus\\\" [fillHighlighted]=\\\"fillHighlighted\\\" \\n                (blur)=\\\"onBlur()\\\" (focus)=\\\"onFocus()\\\" (keyup)=\\\"onKeyup($event)\\\" (keydown)=\\\"onKeydown($event)\\\"\\n                autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" />\\n\\n            <div class=\\\"completer-dropdown-holder\\\"\\n                *ctrList=\\\"dataService;\\n                    minSearchLength: minSearchLength;\\n                    pause: pause;\\n                    autoMatch: autoMatch;\\n                    initialValue: initialValue;\\n                    autoHighlight: autoHighlight;\\n                    let items = results;\\n                    let searchActive = searching;\\n                    let isInitialized = searchInitialized;\\n                    let isOpen = isOpen;\\\">\\n                <div class=\\\"completer-dropdown\\\" ctrDropdown *ngIf=\\\"isInitialized && isOpen && ((items.length > 0 || displayNoResults) || (searchActive && displaySearching))\\\">\\n                    <div *ngIf=\\\"searchActive && displaySearching\\\" class=\\\"completer-searching\\\">{{_textSearching}}</div>\\n                    <div *ngIf=\\\"!searchActive && (!items || items.length === 0)\\\" class=\\\"completer-no-results\\\">{{_textNoResults}}</div>\\n                    <div class=\\\"completer-row-wrapper\\\" *ngFor=\\\"let item of items; let rowIndex=index\\\">\\n                        <div class=\\\"completer-row\\\" [ctrRow]=\\\"rowIndex\\\" [dataItem]=\\\"item\\\">\\n                            <div *ngIf=\\\"item.image || item.image === ''\\\" class=\\\"completer-image-holder\\\">\\n                                <img *ngIf=\\\"item.image != ''\\\" src=\\\"{{item.image}}\\\" class=\\\"completer-image\\\" />\\n                                <div *ngIf=\\\"item.image === ''\\\" class=\\\"completer-image-default\\\"></div>\\n                            </div>\\n                            <div class=\\\"completer-item-text\\\" [ngClass]=\\\"{'completer-item-text-image': item.image || item.image === '' }\\\">\\n                                <completer-list-item class=\\\"completer-title\\\" [text]=\\\"item.title\\\" [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'title'\\\"></completer-list-item>\\n                                <completer-list-item *ngIf=\\\"item.description && item.description != ''\\\" class=\\\"completer-description\\\" [text]=\\\"item.description\\\"\\n                                    [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'description'\\\">\\n                                </completer-list-item>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    \",\r\n                styles: [\"\\n    .completer-dropdown {\\n        border-color: #ececec;\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 2px;\\n        width: 250px;\\n        padding: 6px;\\n        cursor: pointer;\\n        z-index: 9999;\\n        position: absolute;\\n        margin-top: -6px;\\n        background-color: #ffffff;\\n    }\\n\\n    .completer-row {\\n        padding: 5px;\\n        color: #000000;\\n        margin-bottom: 4px;\\n        clear: both;\\n        display: inline-block;\\n        width: 103%;\\n    }\\n\\n    .completer-selected-row {\\n        background-color: lightblue;\\n        color: #ffffff;\\n    }\\n\\n    .completer-description {\\n        font-size: 14px;\\n    }\\n\\n    .completer-image-default {\\n        width: 16px; \\n        height: 16px;\\n        background-image: url(\\\"demo/res/img/default.png\\\");\\n    }\\n\\n    .completer-image-holder {\\n        float: left;\\n        width: 10%;\\n    }\\n    .completer-item-text-image {\\n        float: right;\\n        width: 90%;\\n    }\\n    \"],\r\n                providers: [COMPLETER_CONTROL_VALUE_ACCESSOR]\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCompleterCmp.ctorParameters = function () { return [\r\n    { type: CompleterService, },\r\n]; };\r\nCompleterCmp.propDecorators = {\r\n    'dataService': [{ type: Input },],\r\n    'inputName': [{ type: Input },],\r\n    'inputId': [{ type: Input },],\r\n    'pause': [{ type: Input },],\r\n    'minSearchLength': [{ type: Input },],\r\n    'maxChars': [{ type: Input },],\r\n    'overrideSuggested': [{ type: Input },],\r\n    'clearSelected': [{ type: Input },],\r\n    'clearUnselected': [{ type: Input },],\r\n    'fillHighlighted': [{ type: Input },],\r\n    'placeholder': [{ type: Input },],\r\n    'matchClass': [{ type: Input },],\r\n    'fieldTabindex': [{ type: Input },],\r\n    'autoMatch': [{ type: Input },],\r\n    'disableInput': [{ type: Input },],\r\n    'inputClass': [{ type: Input },],\r\n    'autofocus': [{ type: Input },],\r\n    'openOnFocus': [{ type: Input },],\r\n    'initialValue': [{ type: Input },],\r\n    'autoHighlight': [{ type: Input },],\r\n    'selected': [{ type: Output },],\r\n    'highlighted': [{ type: Output },],\r\n    'blur': [{ type: Output },],\r\n    'focusEvent': [{ type: Output, args: [\"focus\",] },],\r\n    'opened': [{ type: Output },],\r\n    'keyup': [{ type: Output },],\r\n    'keydown': [{ type: Output },],\r\n    'completer': [{ type: ViewChild, args: [CtrCompleter,] },],\r\n    'ctrInput': [{ type: ViewChild, args: [\"ctrInput\",] },],\r\n    'datasource': [{ type: Input },],\r\n    'textNoResults': [{ type: Input },],\r\n    'textSearching': [{ type: Input },],\r\n};\r\n//# sourceMappingURL=completer-cmp.js.map","\"use strict\";\r\nimport { Component, Input } from \"@angular/core\";\r\nvar CompleterListItemCmp = (function () {\r\n    function CompleterListItemCmp() {\r\n        this.parts = [];\r\n    }\r\n    CompleterListItemCmp.prototype.ngOnInit = function () {\r\n        if (!this.searchStr) {\r\n            this.parts.push({ isMatch: false, text: this.text });\r\n            return;\r\n        }\r\n        var matchStr = this.text.toLowerCase();\r\n        var matchPos = matchStr.indexOf(this.searchStr.toLowerCase());\r\n        var startIndex = 0;\r\n        while (matchPos >= 0) {\r\n            var matchText = this.text.slice(matchPos, matchPos + this.searchStr.length);\r\n            if (matchPos === 0) {\r\n                this.parts.push({ isMatch: true, text: matchText });\r\n                startIndex += this.searchStr.length;\r\n            }\r\n            else if (matchPos > 0) {\r\n                var matchPart = this.text.slice(startIndex, matchPos);\r\n                this.parts.push({ isMatch: false, text: matchPart });\r\n                this.parts.push({ isMatch: true, text: matchText });\r\n                startIndex += this.searchStr.length + matchPart.length;\r\n            }\r\n            matchPos = matchStr.indexOf(this.searchStr.toLowerCase(), startIndex);\r\n        }\r\n        if (startIndex < this.text.length) {\r\n            this.parts.push({ isMatch: false, text: this.text.slice(startIndex, this.text.length) });\r\n        }\r\n    };\r\n    return CompleterListItemCmp;\r\n}());\r\nexport { CompleterListItemCmp };\r\nCompleterListItemCmp.decorators = [\r\n    { type: Component, args: [{\r\n                selector: \"completer-list-item\",\r\n                template: \"\\n    <span class=\\\"completer-list-item-holder\\\" [ngClass]=\\\"{'completer-title': type === 'title', 'completer-description': type === 'description'}\\\" >\\n        <span class=\\\"completer-list-item\\\" *ngFor=\\\"let part of parts\\\" [ngClass]=\\\"part.isMatch ? matchClass : null\\\">{{part.text}}</span>\\n    </span>\\n    \"\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCompleterListItemCmp.ctorParameters = function () { return []; };\r\nCompleterListItemCmp.propDecorators = {\r\n    'text': [{ type: Input },],\r\n    'searchStr': [{ type: Input },],\r\n    'matchClass': [{ type: Input },],\r\n    'type': [{ type: Input },],\r\n};\r\n//# sourceMappingURL=completer-list-item-cmp.js.map","import { Directive, ElementRef, Host, HostListener } from \"@angular/core\";\r\nimport { CtrCompleter } from \"./ctr-completer\";\r\nvar CtrRowItem = (function () {\r\n    function CtrRowItem(row, index) {\r\n        this.row = row;\r\n        this.index = index;\r\n    }\r\n    return CtrRowItem;\r\n}());\r\nexport { CtrRowItem };\r\nvar CtrDropdown = (function () {\r\n    function CtrDropdown(completer, el) {\r\n        this.completer = completer;\r\n        this.el = el;\r\n        this.rows = [];\r\n        this.completer.registerDropdown(this);\r\n    }\r\n    CtrDropdown.prototype.ngOnInit = function () {\r\n        var css = getComputedStyle(this.el.nativeElement);\r\n        this.isScrollOn = css.maxHeight && css.overflowY === \"auto\";\r\n    };\r\n    CtrDropdown.prototype.ngOnDestroy = function () {\r\n        this.completer.registerDropdown(null);\r\n    };\r\n    CtrDropdown.prototype.ngAfterViewInit = function () {\r\n        var _this = this;\r\n        var autoHighlightIndex = this.completer.autoHighlightIndex;\r\n        if (autoHighlightIndex) {\r\n            setTimeout(function () {\r\n                _this.highlightRow(autoHighlightIndex);\r\n            }, 0);\r\n        }\r\n    };\r\n    CtrDropdown.prototype.onMouseDown = function (event) {\r\n        var _this = this;\r\n        // Support for canceling blur on IE (issue #158)\r\n        this.completer.cancelBlur(true);\r\n        setTimeout(function () {\r\n            _this.completer.cancelBlur(false);\r\n        }, 0);\r\n    };\r\n    CtrDropdown.prototype.registerRow = function (row) {\r\n        this.rows.push(row);\r\n    };\r\n    CtrDropdown.prototype.highlightRow = function (index) {\r\n        var highlighted = this.rows.find(function (row) { return row.index === index; });\r\n        if (index < 0) {\r\n            if (this.currHighlighted) {\r\n                this.currHighlighted.row.setHighlighted(false);\r\n            }\r\n            this.currHighlighted = undefined;\r\n            this.completer.onHighlighted(null);\r\n            return;\r\n        }\r\n        if (!highlighted) {\r\n            return;\r\n        }\r\n        if (this.currHighlighted) {\r\n            this.currHighlighted.row.setHighlighted(false);\r\n        }\r\n        this.currHighlighted = highlighted;\r\n        this.currHighlighted.row.setHighlighted(true);\r\n        this.completer.onHighlighted(this.currHighlighted.row.getDataItem());\r\n        if (this.isScrollOn && this.currHighlighted) {\r\n            var rowTop = this.dropdownRowTop();\r\n            if (rowTop < 0) {\r\n                this.dropdownScrollTopTo(rowTop - 1);\r\n            }\r\n            else {\r\n                var row = this.currHighlighted.row.getNativeElement();\r\n                if (this.dropdownHeight() < row.getBoundingClientRect().bottom) {\r\n                    this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(row));\r\n                    if (this.el.nativeElement.getBoundingClientRect().bottom - this.dropdownRowOffsetHeight(row) < row.getBoundingClientRect().top) {\r\n                        this.dropdownScrollTopTo(row.getBoundingClientRect().top - (this.el.nativeElement.getBoundingClientRect().top + parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10)));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CtrDropdown.prototype.clear = function () {\r\n        this.rows = [];\r\n    };\r\n    CtrDropdown.prototype.onSelected = function (item) {\r\n        this.completer.onSelected(item);\r\n    };\r\n    CtrDropdown.prototype.selectCurrent = function () {\r\n        if (this.currHighlighted) {\r\n            this.onSelected(this.currHighlighted.row.getDataItem());\r\n        }\r\n        else if (this.rows.length > 0) {\r\n            this.onSelected(this.rows[0].row.getDataItem());\r\n        }\r\n    };\r\n    CtrDropdown.prototype.nextRow = function () {\r\n        var nextRowIndex = 0;\r\n        if (this.currHighlighted) {\r\n            nextRowIndex = this.currHighlighted.index + 1;\r\n        }\r\n        this.highlightRow(nextRowIndex);\r\n    };\r\n    CtrDropdown.prototype.prevRow = function () {\r\n        var nextRowIndex = -1;\r\n        if (this.currHighlighted) {\r\n            nextRowIndex = this.currHighlighted.index - 1;\r\n        }\r\n        this.highlightRow(nextRowIndex);\r\n    };\r\n    CtrDropdown.prototype.dropdownScrollTopTo = function (offset) {\r\n        this.el.nativeElement.scrollTop = this.el.nativeElement.scrollTop + offset;\r\n    };\r\n    CtrDropdown.prototype.dropdownRowTop = function () {\r\n        return this.currHighlighted.row.getNativeElement().getBoundingClientRect().top -\r\n            (this.el.nativeElement.getBoundingClientRect().top +\r\n                parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10));\r\n    };\r\n    CtrDropdown.prototype.dropdownHeight = function () {\r\n        return this.el.nativeElement.getBoundingClientRect().top +\r\n            parseInt(getComputedStyle(this.el.nativeElement).maxHeight, 10);\r\n    };\r\n    CtrDropdown.prototype.dropdownRowOffsetHeight = function (row) {\r\n        var css = getComputedStyle(row);\r\n        return row.offsetHeight +\r\n            parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\r\n    };\r\n    return CtrDropdown;\r\n}());\r\nexport { CtrDropdown };\r\nCtrDropdown.decorators = [\r\n    { type: Directive, args: [{\r\n                selector: \"[ctrDropdown]\",\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCtrDropdown.ctorParameters = function () { return [\r\n    { type: CtrCompleter, decorators: [{ type: Host },] },\r\n    { type: ElementRef, },\r\n]; };\r\nCtrDropdown.propDecorators = {\r\n    'onMouseDown': [{ type: HostListener, args: [\"mousedown\", [\"$event\"],] },],\r\n};\r\n//# sourceMappingURL=ctr-dropdown.js.map","import { Directive, ElementRef, EventEmitter, Host, HostListener, Input, Output } from \"@angular/core\";\r\nimport { NgModel } from \"@angular/forms\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { CtrCompleter } from \"./ctr-completer\";\r\nimport { isNil } from \"../globals\";\r\n// keyboard events\r\nvar KEY_DW = 40;\r\nvar KEY_RT = 39;\r\nvar KEY_UP = 38;\r\nvar KEY_LF = 37;\r\nvar KEY_ES = 27;\r\nvar KEY_EN = 13;\r\nvar KEY_TAB = 9;\r\nvar CtrInput = (function () {\r\n    function CtrInput(completer, ngModel, el) {\r\n        var _this = this;\r\n        this.completer = completer;\r\n        this.ngModel = ngModel;\r\n        this.el = el;\r\n        this.clearSelected = false;\r\n        this.clearUnselected = false;\r\n        this.overrideSuggested = false;\r\n        this.fillHighlighted = true;\r\n        this.openOnFocus = false;\r\n        this.ngModelChange = new EventEmitter();\r\n        this._searchStr = \"\";\r\n        this._displayStr = \"\";\r\n        this.blurTimer = null;\r\n        this.completer.selected.subscribe(function (item) {\r\n            if (!item) {\r\n                return;\r\n            }\r\n            if (_this.clearSelected) {\r\n                _this.searchStr = \"\";\r\n            }\r\n            else {\r\n                _this.searchStr = item.title;\r\n            }\r\n            _this.ngModelChange.emit(_this.searchStr);\r\n        });\r\n        this.completer.highlighted.subscribe(function (item) {\r\n            if (_this.fillHighlighted) {\r\n                if (item) {\r\n                    _this._displayStr = item.title;\r\n                    _this.ngModelChange.emit(item.title);\r\n                }\r\n                else {\r\n                    _this._displayStr = _this.searchStr;\r\n                    _this.ngModelChange.emit(_this.searchStr);\r\n                }\r\n            }\r\n        });\r\n        this.ngModel.valueChanges.subscribe(function (value) {\r\n            if (!isNil(value) && _this._displayStr !== value) {\r\n                if (_this.searchStr !== value) {\r\n                    _this.completer.search(value);\r\n                }\r\n                _this.searchStr = value;\r\n            }\r\n        });\r\n    }\r\n    CtrInput.prototype.keyupHandler = function (event) {\r\n        if (event.keyCode === KEY_LF || event.keyCode === KEY_RT || event.keyCode === KEY_TAB) {\r\n            // do nothing\r\n            return;\r\n        }\r\n        if (event.keyCode === KEY_UP || event.keyCode === KEY_EN) {\r\n            event.preventDefault();\r\n        }\r\n        else if (event.keyCode === KEY_DW) {\r\n            event.preventDefault();\r\n            this.completer.search(this.searchStr);\r\n        }\r\n        else if (event.keyCode === KEY_ES) {\r\n            this.restoreSearchValue();\r\n            this.completer.clear();\r\n        }\r\n        else {\r\n            if (this.searchStr) {\r\n                this.completer.open();\r\n            }\r\n        }\r\n    };\r\n    CtrInput.prototype.keydownHandler = function (event) {\r\n        if (event.keyCode === KEY_EN) {\r\n            if (this.completer.hasHighlighted()) {\r\n                event.preventDefault();\r\n            }\r\n            this.handleSelection();\r\n        }\r\n        else if (event.keyCode === KEY_DW) {\r\n            event.preventDefault();\r\n            this.completer.open();\r\n            this.completer.nextRow();\r\n        }\r\n        else if (event.keyCode === KEY_UP) {\r\n            event.preventDefault();\r\n            this.completer.prevRow();\r\n        }\r\n        else if (event.keyCode === KEY_TAB) {\r\n            this.handleSelection();\r\n        }\r\n        else if (event.keyCode === KEY_ES) {\r\n            // This is very specific to IE10/11 #272\r\n            // without this, IE clears the input text\r\n            event.preventDefault();\r\n        }\r\n    };\r\n    CtrInput.prototype.onBlur = function (event) {\r\n        var _this = this;\r\n        // Check if we need to cancel Blur for IE\r\n        if (this.completer.isCancelBlur()) {\r\n            setTimeout(function () {\r\n                // get the focus back\r\n                _this.el.nativeElement.focus();\r\n            }, 0);\r\n            return;\r\n        }\r\n        this.blurTimer = Observable.timer(200).subscribe(function () {\r\n            _this.blurTimer.unsubscribe();\r\n            _this.blurTimer = null;\r\n            if (_this.overrideSuggested) {\r\n                _this.completer.onSelected({ title: _this.searchStr, originalObject: null });\r\n            }\r\n            else {\r\n                if (_this.clearUnselected && !_this.completer.hasSelected) {\r\n                    _this.searchStr = \"\";\r\n                    _this.ngModelChange.emit(_this.searchStr);\r\n                }\r\n                else {\r\n                    _this.restoreSearchValue();\r\n                }\r\n            }\r\n            _this.completer.clear();\r\n        });\r\n    };\r\n    CtrInput.prototype.onfocus = function () {\r\n        if (this.blurTimer) {\r\n            this.blurTimer.unsubscribe();\r\n            this.blurTimer = null;\r\n        }\r\n        if (this.openOnFocus) {\r\n            this.completer.open();\r\n        }\r\n    };\r\n    Object.defineProperty(CtrInput.prototype, \"searchStr\", {\r\n        get: function () {\r\n            return this._searchStr;\r\n        },\r\n        set: function (term) {\r\n            this._searchStr = term;\r\n            this._displayStr = term;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CtrInput.prototype.handleSelection = function () {\r\n        if (this.completer.hasHighlighted()) {\r\n            this._searchStr = \"\";\r\n            this.completer.selectCurrent();\r\n        }\r\n        else if (this.overrideSuggested) {\r\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\r\n        }\r\n        else {\r\n            this.completer.clear();\r\n        }\r\n    };\r\n    CtrInput.prototype.restoreSearchValue = function () {\r\n        if (this.fillHighlighted) {\r\n            if (this._displayStr != this.searchStr) {\r\n                this._displayStr = this.searchStr;\r\n                this.ngModelChange.emit(this.searchStr);\r\n            }\r\n        }\r\n    };\r\n    return CtrInput;\r\n}());\r\nexport { CtrInput };\r\nCtrInput.decorators = [\r\n    { type: Directive, args: [{\r\n                selector: \"[ctrInput]\",\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCtrInput.ctorParameters = function () { return [\r\n    { type: CtrCompleter, decorators: [{ type: Host },] },\r\n    { type: NgModel, },\r\n    { type: ElementRef, },\r\n]; };\r\nCtrInput.propDecorators = {\r\n    'clearSelected': [{ type: Input, args: [\"clearSelected\",] },],\r\n    'clearUnselected': [{ type: Input, args: [\"clearUnselected\",] },],\r\n    'overrideSuggested': [{ type: Input, args: [\"overrideSuggested\",] },],\r\n    'fillHighlighted': [{ type: Input, args: [\"fillHighlighted\",] },],\r\n    'openOnFocus': [{ type: Input, args: [\"openOnFocus\",] },],\r\n    'ngModelChange': [{ type: Output },],\r\n    'keyupHandler': [{ type: HostListener, args: [\"keyup\", [\"$event\"],] },],\r\n    'keydownHandler': [{ type: HostListener, args: [\"keydown\", [\"$event\"],] },],\r\n    'onBlur': [{ type: HostListener, args: [\"blur\", [\"$event\"],] },],\r\n    'onfocus': [{ type: HostListener, args: [\"focus\", [\"$event\"],] },],\r\n};\r\n//# sourceMappingURL=ctr-input.js.map","import \"rxjs/add/observable/timer\";\r\nimport { ChangeDetectorRef, Directive, Host, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { CtrCompleter } from \"./ctr-completer\";\r\nimport { MIN_SEARCH_LENGTH, PAUSE, CLEAR_TIMEOUT, isNil } from \"../globals\";\r\nvar CtrListContext = (function () {\r\n    function CtrListContext(results, searching, searchInitialized, isOpen) {\r\n        this.results = results;\r\n        this.searching = searching;\r\n        this.searchInitialized = searchInitialized;\r\n        this.isOpen = isOpen;\r\n    }\r\n    return CtrListContext;\r\n}());\r\nexport { CtrListContext };\r\nvar CtrList = (function () {\r\n    function CtrList(completer, templateRef, viewContainer, cd) {\r\n        this.completer = completer;\r\n        this.templateRef = templateRef;\r\n        this.viewContainer = viewContainer;\r\n        this.cd = cd;\r\n        this.ctrListMinSearchLength = MIN_SEARCH_LENGTH;\r\n        this.ctrListPause = PAUSE;\r\n        this.ctrListAutoMatch = false;\r\n        this.ctrListAutoHighlight = false;\r\n        // private results: CompleterItem[] = [];\r\n        this.term = null;\r\n        // private searching = false;\r\n        this.searchTimer = null;\r\n        this.clearTimer = null;\r\n        this.ctx = new CtrListContext([], false, false, false);\r\n        this._initialValue = null;\r\n    }\r\n    CtrList.prototype.ngOnInit = function () {\r\n        this.completer.registerList(this);\r\n        this.viewContainer.createEmbeddedView(this.templateRef, new CtrListContext([], false, false, false));\r\n    };\r\n    Object.defineProperty(CtrList.prototype, \"dataService\", {\r\n        set: function (newService) {\r\n            var _this = this;\r\n            this._dataService = newService;\r\n            if (this._dataService) {\r\n                this._dataService\r\n                    .catch(function (err) { return _this.handleError(err); })\r\n                    .subscribe(function (results) {\r\n                    _this.ctx.searchInitialized = true;\r\n                    _this.ctx.searching = false;\r\n                    _this.ctx.results = results;\r\n                    if (_this.ctrListAutoMatch && results.length === 1 && results[0].title && !isNil(_this.term) &&\r\n                        results[0].title.toLocaleLowerCase() === _this.term.toLocaleLowerCase()) {\r\n                        // Do automatch\r\n                        _this.completer.onSelected(results[0]);\r\n                    }\r\n                    if (_this._initialValue) {\r\n                        _this.initialValue = _this._initialValue;\r\n                        _this._initialValue = null;\r\n                    }\r\n                    if (_this.ctrListAutoHighlight) {\r\n                        _this.completer.autoHighlightIndex = _this.getBestMatchIndex();\r\n                    }\r\n                    _this.refreshTemplate();\r\n                });\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CtrList.prototype, \"initialValue\", {\r\n        set: function (value) {\r\n            var _this = this;\r\n            if (this._dataService && typeof this._dataService.convertToItem === \"function\") {\r\n                setTimeout(function () {\r\n                    var initialItem = _this._dataService.convertToItem(value);\r\n                    if (initialItem) {\r\n                        _this.completer.onSelected(initialItem, false);\r\n                    }\r\n                });\r\n            }\r\n            else if (!this._dataService) {\r\n                this._initialValue = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CtrList.prototype.search = function (term) {\r\n        var _this = this;\r\n        if (!isNil(term) && term.length >= this.ctrListMinSearchLength && this.term !== term) {\r\n            if (this.searchTimer) {\r\n                this.searchTimer.unsubscribe();\r\n                this.searchTimer = null;\r\n            }\r\n            if (!this.ctx.searching) {\r\n                this.ctx.results = [];\r\n                this.ctx.searching = true;\r\n                this.ctx.searchInitialized = true;\r\n                this.refreshTemplate();\r\n            }\r\n            if (this.clearTimer) {\r\n                this.clearTimer.unsubscribe();\r\n            }\r\n            this.searchTimer = Observable.timer(this.ctrListPause).subscribe(function () {\r\n                _this.searchTimerComplete(term);\r\n            });\r\n        }\r\n        else if (!isNil(term) && term.length < this.ctrListMinSearchLength) {\r\n            this.clear();\r\n        }\r\n    };\r\n    CtrList.prototype.clear = function () {\r\n        var _this = this;\r\n        if (this.searchTimer) {\r\n            this.searchTimer.unsubscribe();\r\n        }\r\n        this.clearTimer = Observable.timer(CLEAR_TIMEOUT).subscribe(function () {\r\n            _this._clear();\r\n        });\r\n    };\r\n    CtrList.prototype.open = function () {\r\n        if (!this.ctx.searchInitialized) {\r\n            this.search(\"\");\r\n        }\r\n        this.refreshTemplate();\r\n    };\r\n    CtrList.prototype.isOpen = function (open) {\r\n        this.ctx.isOpen = open;\r\n    };\r\n    CtrList.prototype._clear = function () {\r\n        if (this.searchTimer) {\r\n            this.searchTimer.unsubscribe();\r\n            this.searchTimer = null;\r\n        }\r\n        if (this.dataService) {\r\n            this.dataService.cancel();\r\n        }\r\n        this.viewContainer.clear();\r\n    };\r\n    CtrList.prototype.searchTimerComplete = function (term) {\r\n        // Begin the search\r\n        if (isNil(term) || term.length < this.ctrListMinSearchLength) {\r\n            this.ctx.searching = false;\r\n            return;\r\n        }\r\n        this.term = term;\r\n        this._dataService.search(term);\r\n    };\r\n    CtrList.prototype.handleError = function (error) {\r\n        this.ctx.searching = false;\r\n        var errMsg = \"search error\";\r\n        if (error) {\r\n            errMsg = (error.message) ? error.message :\r\n                error.status ? error.status + \" - \" + error.statusText : \"Server error\";\r\n        }\r\n        if (console && console.error) {\r\n            console.error(errMsg); // log to console\r\n        }\r\n        this.refreshTemplate();\r\n        return Observable.throw(errMsg);\r\n    };\r\n    CtrList.prototype.refreshTemplate = function () {\r\n        // Recreate the template\r\n        this.viewContainer.clear();\r\n        if (this.ctx.results && this.ctx.isOpen) {\r\n            this.viewContainer.createEmbeddedView(this.templateRef, this.ctx);\r\n        }\r\n        this.cd.markForCheck();\r\n    };\r\n    CtrList.prototype.getBestMatchIndex = function () {\r\n        var _this = this;\r\n        if (!this.ctx.results) {\r\n            return null;\r\n        }\r\n        // First try to find the exact term\r\n        var bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase() === _this.term.toLocaleLowerCase(); });\r\n        // If not try to find the first item that starts with the term\r\n        if (bestMatch < 0) {\r\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().startsWith(_this.term.toLocaleLowerCase()); });\r\n        }\r\n        // If not try to find the first item that includes the term\r\n        if (bestMatch < 0) {\r\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().includes(_this.term.toLocaleLowerCase()); });\r\n        }\r\n        return bestMatch < 0 ? null : bestMatch;\r\n    };\r\n    return CtrList;\r\n}());\r\nexport { CtrList };\r\nCtrList.decorators = [\r\n    { type: Directive, args: [{\r\n                selector: \"[ctrList]\",\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCtrList.ctorParameters = function () { return [\r\n    { type: CtrCompleter, decorators: [{ type: Host },] },\r\n    { type: TemplateRef, },\r\n    { type: ViewContainerRef, },\r\n    { type: ChangeDetectorRef, },\r\n]; };\r\nCtrList.propDecorators = {\r\n    'ctrListMinSearchLength': [{ type: Input },],\r\n    'ctrListPause': [{ type: Input },],\r\n    'ctrListAutoMatch': [{ type: Input },],\r\n    'ctrListAutoHighlight': [{ type: Input },],\r\n    'dataService': [{ type: Input, args: [\"ctrList\",] },],\r\n    'initialValue': [{ type: Input, args: [\"ctrListInitialValue\",] },],\r\n};\r\n//# sourceMappingURL=ctr-list.js.map","import { Directive, ElementRef, Host, HostListener, Input, Renderer } from \"@angular/core\";\r\nimport { CtrDropdown, CtrRowItem } from \"./ctr-dropdown\";\r\nvar CtrRow = (function () {\r\n    function CtrRow(el, renderer, dropdown) {\r\n        this.el = el;\r\n        this.renderer = renderer;\r\n        this.dropdown = dropdown;\r\n        this.selected = false;\r\n    }\r\n    CtrRow.prototype.ngOnInit = function () {\r\n        this.dropdown.registerRow(new CtrRowItem(this, this._rowIndex));\r\n    };\r\n    Object.defineProperty(CtrRow.prototype, \"ctrRow\", {\r\n        set: function (index) {\r\n            this._rowIndex = index;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CtrRow.prototype, \"dataItem\", {\r\n        set: function (item) {\r\n            this._item = item;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CtrRow.prototype.onClick = function (event) {\r\n        this.dropdown.onSelected(this._item);\r\n    };\r\n    CtrRow.prototype.onMouseEnter = function (event) {\r\n        this.dropdown.highlightRow(this._rowIndex);\r\n    };\r\n    CtrRow.prototype.setHighlighted = function (selected) {\r\n        this.selected = selected;\r\n        this.renderer.setElementClass(this.el.nativeElement, \"completer-selected-row\", this.selected);\r\n    };\r\n    CtrRow.prototype.getNativeElement = function () {\r\n        return this.el.nativeElement;\r\n    };\r\n    CtrRow.prototype.getDataItem = function () {\r\n        return this._item;\r\n    };\r\n    return CtrRow;\r\n}());\r\nexport { CtrRow };\r\nCtrRow.decorators = [\r\n    { type: Directive, args: [{\r\n                selector: \"[ctrRow]\",\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nCtrRow.ctorParameters = function () { return [\r\n    { type: ElementRef, },\r\n    { type: Renderer, },\r\n    { type: CtrDropdown, decorators: [{ type: Host },] },\r\n]; };\r\nCtrRow.propDecorators = {\r\n    'ctrRow': [{ type: Input },],\r\n    'dataItem': [{ type: Input },],\r\n    'onClick': [{ type: HostListener, args: [\"click\", [\"$event\"],] },],\r\n    'onMouseEnter': [{ type: HostListener, args: [\"mouseenter\", [\"$event\"],] },],\r\n};\r\n//# sourceMappingURL=ctr-row.js.map","import { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { HttpModule } from \"@angular/http\";\r\nimport { CompleterCmp } from \"./components/completer-cmp\";\r\nimport { CompleterListItemCmp } from \"./components/completer-list-item-cmp\";\r\nimport { CompleterService } from \"./services/completer-service\";\r\nimport { LocalDataFactoryProvider, RemoteDataFactoryProvider } from \"./services/completer-data-factory\";\r\nimport { CtrCompleter } from \"./directives/ctr-completer\";\r\nimport { CtrDropdown } from \"./directives/ctr-dropdown\";\r\nimport { CtrInput } from \"./directives/ctr-input\";\r\nimport { CtrList } from \"./directives/ctr-list\";\r\nimport { CtrRow } from \"./directives/ctr-row\";\r\nimport { CommonModule } from \"@angular/common\";\r\nvar Ng2CompleterModule = (function () {\r\n    function Ng2CompleterModule() {\r\n    }\r\n    return Ng2CompleterModule;\r\n}());\r\nexport { Ng2CompleterModule };\r\nNg2CompleterModule.decorators = [\r\n    { type: NgModule, args: [{\r\n                imports: [\r\n                    CommonModule,\r\n                    FormsModule,\r\n                    HttpModule\r\n                ],\r\n                declarations: [\r\n                    CompleterListItemCmp,\r\n                    CtrCompleter,\r\n                    CtrDropdown,\r\n                    CtrInput,\r\n                    CtrList,\r\n                    CtrRow,\r\n                    CompleterCmp\r\n                ],\r\n                exports: [\r\n                    CompleterCmp,\r\n                    CompleterListItemCmp,\r\n                    CtrCompleter,\r\n                    CtrDropdown,\r\n                    CtrInput,\r\n                    CtrList,\r\n                    CtrRow\r\n                ],\r\n                providers: [\r\n                    CompleterService,\r\n                    LocalDataFactoryProvider,\r\n                    RemoteDataFactoryProvider\r\n                ]\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nNg2CompleterModule.ctorParameters = function () { return []; };\r\n//# sourceMappingURL=ng2-completer.module.js.map"],"names":["isNil","value","localDataFactory","LocalData","remoteDataFactory","http","RemoteData","CtrCompleter","this","selected","EventEmitter","highlighted","opened","_hasHighlighted","_hasSelected","_cancelBlur","_isOpen","prototype","registerList","list","registerDropdown","dropdown","onHighlighted","item","emit","onSelected","clearList","clear","search","term","isOpen","selectCurrent","nextRow","prevRow","hasHighlighted","cancelBlur","cancel","isCancelBlur","open","Object","defineProperty","get","set","enumerable","configurable","_autoHighlightIndex","index","decorators","type","Directive","args","selector","ctorParameters","propDecorators","Output","MAX_CHARS","MIN_SEARCH_LENGTH","PAUSE","TEXT_SEARCHING","TEXT_NO_RESULTS","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","CompleterBaseData","_super","call","searchFields","_searchFields","titleField","_titleField","descriptionField","_descriptionField","imageField","_imageField","convertToItem","data","formattedText","formattedDesc","image","extractTitle","extractValue","title","description","originalObject","responseFormatter","formatterFunction","extractMatches","_this","split","undefined","filter","map","searchField","some","toString","toLowerCase","indexOf","field","reduce","acc","titlePart","obj","key","keys","result","i","length","processResults","matches","results","push","executeFormatterFunction","fn","e","console","warn","Subject","Observable","subscribe","res","_data","savedTerm","next","Injectable","_urlFormater","_dataField","remoteUrl","_remoteUrl","urlFormater","dataField","headers","_headers","requestOptions","_requestOptions","url","encodeURIComponent","RequestOptions","Headers","remoteSearch","json","catch","err","error","unsubscribe","CompleterService","local","remote","Inject","noop","COMPLETER_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CompleterCmp","multi","completerService","inputName","inputId","pause","minSearchLength","maxChars","overrideSuggested","clearSelected","clearUnselected","fillHighlighted","placeholder","autoMatch","disableInput","autofocus","openOnFocus","autoHighlight","blur","focusEvent","keyup","keydown","searchStr","control","FormControl","displaySearching","displayNoResults","_onTouchedCallback","_onChangeCallback","_focus","_open","_textNoResults","_textSearching","v","ngAfterViewInit","ngAfterViewChecked","ctrInput","nativeElement","focus","onTouched","writeValue","registerOnChange","registerOnTouched","source","dataService","text","ngOnInit","completer","onBlur","onFocus","onKeyup","event","onKeydown","onChange","close","Component","template","styles","providers","Input","matchClass","fieldTabindex","inputClass","initialValue","ViewChild","datasource","textNoResults","textSearching","CompleterListItemCmp","parts","isMatch","matchStr","matchPos","startIndex","matchText","slice","matchPart","LocalDataFactoryProvider","useFactory","RemoteDataFactoryProvider","deps","Http","CtrRowItem","row","CtrDropdown","el","rows","css","getComputedStyle","isScrollOn","maxHeight","overflowY","ngOnDestroy","autoHighlightIndex","setTimeout","highlightRow","onMouseDown","registerRow","find","currHighlighted","setHighlighted","getDataItem","rowTop","dropdownRowTop","dropdownScrollTopTo","getNativeElement","dropdownHeight","getBoundingClientRect","bottom","dropdownRowOffsetHeight","top","parseInt","paddingTop","nextRowIndex","offset","scrollTop","offsetHeight","marginTop","marginBottom","Host","ElementRef","HostListener","CtrInput","ngModel","ngModelChange","_searchStr","_displayStr","blurTimer","valueChanges","keyupHandler","keyCode","preventDefault","restoreSearchValue","keydownHandler","handleSelection","timer","hasSelected","onfocus","NgModel","CtrListContext","searching","searchInitialized","CtrList","templateRef","viewContainer","cd","ctrListMinSearchLength","ctrListPause","ctrListAutoMatch","ctrListAutoHighlight","searchTimer","clearTimer","ctx","_initialValue","createEmbeddedView","newService","_dataService","handleError","toLocaleLowerCase","getBestMatchIndex","refreshTemplate","initialItem","searchTimerComplete","_clear","errMsg","message","status","statusText","throw","markForCheck","bestMatch","findIndex","startsWith","includes","TemplateRef","ViewContainerRef","ChangeDetectorRef","CtrRow","renderer","_rowIndex","_item","onClick","onMouseEnter","setElementClass","Renderer","ctrRow","dataItem","Ng2CompleterModule","NgModule","imports","CommonModule","FormsModule","HttpModule","declarations","exports"],"mappings":"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"}